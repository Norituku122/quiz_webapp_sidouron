
const questions = [
"生徒指導の基本書を(__)という。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導とは、児童生徒が、(__)の中で(__)生きることができる存在へと、(__)に(__)や(__)する過程を支える(__)のことである。なお、生徒指導上の(__)に対応するために、必要に応じて(__)や(__)を行う。",
"生徒指導は、児童生徒一人一人の(__)の発見と(__)や(__)の(__)と(__)の発達を支えると同時に、自己の(__)と社会に受け入れられる(__)を支えることを目的とする。",
"生徒指導は、児童生徒一人一人の(__)の発見と(__)や(__)の(__)と(__)の発達を支えると同時に、自己の(__)と社会に受け入れられる(__)を支えることを目的とする。",
"生徒指導は、児童生徒一人一人の(__)の発見と(__)や(__)の(__)と(__)の発達を支えると同時に、自己の(__)と社会に受け入れられる(__)を支えることを目的とする。",
"生徒指導は、児童生徒一人一人の(__)の発見と(__)や(__)の(__)と(__)の発達を支えると同時に、自己の(__)と社会に受け入れられる(__)を支えることを目的とする。",
"生徒指導は、児童生徒一人一人の(__)の発見と(__)や(__)の(__)と(__)の発達を支えると同時に、自己の(__)と社会に受け入れられる(__)を支えることを目的とする。",
"生徒指導は、児童生徒一人一人の(__)の発見と(__)や(__)の(__)と(__)の発達を支えると同時に、自己の(__)と社会に受け入れられる(__)を支えることを目的とする。",
"生徒指導は、児童生徒一人一人の(__)の発見と(__)や(__)の(__)と(__)の発達を支えると同時に、自己の(__)と社会に受け入れられる(__)を支えることを目的とする。",
"学習や生活の基盤として、教師と生徒との信頼関係及び生徒相互のよりよい人間関係を育てるため、日頃から学級経営の充実を図ること。また、主に集団の場面で必要な指導や援助を行う(__)と、個々の生徒の多様な実態を踏まえ、一人一人が抱える課題に個別に対応した指導を行う(__)の双方により、生徒の(__)を支援すること。",
"学習や生活の基盤として、教師と生徒との信頼関係及び生徒相互のよりよい人間関係を育てるため、日頃から学級経営の充実を図ること。また、主に集団の場面で必要な指導や援助を行う(__)と、個々の生徒の多様な実態を踏まえ、一人一人が抱える課題に個別に対応した指導を行う(__)の双方により、生徒の(__)を支援すること。",
"学習や生活の基盤として、教師と生徒との信頼関係及び生徒相互のよりよい人間関係を育てるため、日頃から学級経営の充実を図ること。また、主に集団の場面で必要な指導や援助を行う(__)と、個々の生徒の多様な実態を踏まえ、一人一人が抱える課題に個別に対応した指導を行う(__)の双方により、生徒の(__)を支援すること。",
"生徒が、学ぶことと自己の将来とのつながりを見通しながら、(__)に向けて必要な基盤となる資質・能力を身に付けていくことができるよう、特別活動を要としつつ各教科等の特質に応じて、(__)を図ること。その中で、生徒が(__)を考え主体的に(__)を選択することができるよう、学校の教育活動全体を通じ、(__)かつ(__)な(__)を行うこと。",
"生徒が、学ぶことと自己の将来とのつながりを見通しながら、(__)に向けて必要な基盤となる資質・能力を身に付けていくことができるよう、特別活動を要としつつ各教科等の特質に応じて、(__)を図ること。その中で、生徒が(__)を考え主体的に(__)を選択することができるよう、学校の教育活動全体を通じ、(__)かつ(__)な(__)を行うこと。",
"生徒が、学ぶことと自己の将来とのつながりを見通しながら、(__)に向けて必要な基盤となる資質・能力を身に付けていくことができるよう、特別活動を要としつつ各教科等の特質に応じて、(__)を図ること。その中で、生徒が(__)を考え主体的に(__)を選択することができるよう、学校の教育活動全体を通じ、(__)かつ(__)な(__)を行うこと。",
"生徒が、学ぶことと自己の将来とのつながりを見通しながら、(__)に向けて必要な基盤となる資質・能力を身に付けていくことができるよう、特別活動を要としつつ各教科等の特質に応じて、(__)を図ること。その中で、生徒が(__)を考え主体的に(__)を選択することができるよう、学校の教育活動全体を通じ、(__)かつ(__)な(__)を行うこと。",
"生徒が、学ぶことと自己の将来とのつながりを見通しながら、(__)に向けて必要な基盤となる資質・能力を身に付けていくことができるよう、特別活動を要としつつ各教科等の特質に応じて、(__)を図ること。その中で、生徒が(__)を考え主体的に(__)を選択することができるよう、学校の教育活動全体を通じ、(__)かつ(__)な(__)を行うこと。",
"生徒が、学ぶことと自己の将来とのつながりを見通しながら、(__)に向けて必要な基盤となる資質・能力を身に付けていくことができるよう、特別活動を要としつつ各教科等の特質に応じて、(__)を図ること。その中で、生徒が(__)を考え主体的に(__)を選択することができるよう、学校の教育活動全体を通じ、(__)かつ(__)な(__)を行うこと。",
"生徒が、学ぶことと自己の将来とのつながりを見通しながら、(__)に向けて必要な基盤となる資質・能力を身に付けていくことができるよう、特別活動を要としつつ各教科等の特質に応じて、(__)を図ること。その中で、生徒が(__)を考え主体的に(__)を選択することができるよう、学校の教育活動全体を通じ、(__)かつ(__)な(__)を行うこと。",
"積極的な先手型の生徒指導を(__)という。",
"事後対応型の生徒指導を(__)という。",
"全ての児童生徒の発達を支えるために日常的におこなわれる生徒指導を(__)という。",
"全ての児童生徒を対象とした課題の(__)と、課題の前兆行動が見られる一部の児童生徒を対象とした課題の(__)と対応を含む生徒指導を(__)という。",
"全ての児童生徒を対象とした課題の(__)と、課題の前兆行動が見られる一部の児童生徒を対象とした課題の(__)と対応を含む生徒指導を(__)という。",
"全ての児童生徒を対象とした課題の(__)と、課題の前兆行動が見られる一部の児童生徒を対象とした課題の(__)と対応を含む生徒指導を(__)という。",
"深刻な課題を抱えている特定の児童生徒への指導・援助を(__)という。",
"子ども権利条約12条には、「自己の意見を形成する能力のある児童がその児童に影響を及ぼすすべての事項について(__)を確保する」とある。"
];
const answers = [
"『生徒指導提要(改訂版)』",
"社会",
"自分らしく",
"自発的・主体的",
"成長",
"発達",
"教育活動",
"課題",
"指導",
"援助",
"個性",
"よさ",
"可能性",
"伸長",
"社会的資質・能力",
"幸福追求",
"自己実現",
"ガイダンス",
"カウンセリング",
"発達",
"社会的・職業的自立",
"キャリア教育の充実",
"自らの生き方",
"進路",
"組職的",
"計画的",
"進路指導",
"常態的・先行的生徒指導",
"即応的・断続的生徒指導",
"発達支持的生徒指導",
"未然防止教育",
"早期発見",
"課題予防的生徒指導",
"困難課題対応的生徒指導",
"自由に個人の意見を表明する権利"
];

let range = [], current = 0, correct = 0, mistakes = [];

function startQuiz() {
  const start = parseInt(document.getElementById('start').value, 10) - 1;
  const end = parseInt(document.getElementById('end').value, 10) - 1;
  const mode = document.getElementById('mode').value;

  range = [];
  for (let i = start; i <= end; i++) range.push(i);
  if (mode === 'random') range = shuffle(range);

  current = 0;
  correct = 0;
  mistakes = [];

  document.getElementById('settings').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  showQuestion();
}

function showQuestion() {
  if (current < range.length) {
    document.getElementById('question').textContent = questions[range[current]];
    document.getElementById('answer').value = '';
    document.getElementById('feedback').textContent = '';
  } else {
    showResults();
  }
}

function submitAnswer() {
  const input = document.getElementById('answer').value.trim();
  const correctAns = answers[range[current]];
  const feedback = document.getElementById('feedback');

  if (input === correctAns) {
    feedback.textContent = '正解！';
    correct++;
  } else {
    feedback.textContent = `不正解：正答は「${correctAns}」です。`;
    mistakes.push(range[current]);
  }

  current++;
  setTimeout(showQuestion, 1000);
}

function endQuiz() {
  showResults();
}

function showResults() {
  document.getElementById('quiz').classList.add('hidden');
  document.getElementById('result').classList.remove('hidden');
  document.getElementById('summary').textContent = `全${range.length}問中、${range.length - mistakes.length}問正解、${mistakes.length}問間違えました。`;

  const mArea = document.getElementById('mistakes');
  if (mistakes.length === 0) {
    mArea.innerHTML = '<p>全問正解！おめでとうございます！</p>';
  } else {
    const ul = document.createElement('ul');
    mistakes.forEach(idx => {
      const li = document.createElement('li');
      li.innerHTML = `<strong>Q:</strong> ${questions[idx]}<br><strong>A:</strong> ${answers[idx]}`;
      ul.appendChild(li);
    });
    mArea.innerHTML = '';
    mArea.appendChild(ul);
  }
}

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
